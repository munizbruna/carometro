<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Usuário</title>
    <!-- Script para buscar tipos de usuários, se necessário -->
    <!-- <script>
        async function fetchTipoUsuarios() {
            try {
                const response = await fetch('/tipos');
                const tiposUsuarios = await response.json();
                const select = document.getElementById('idTiposUsuarios');
                
                tiposUsuarios.forEach(tipo => {
                    const option = document.createElement('option');
                    option.value = tipo.idTipos_Usuarios; // Supondo que o campo de ID é 'id'
                    option.text = tipo.descricao; // Supondo que o campo de nome é 'nome'
                    select.add(option);
                });
            } catch (error) {
                console.error('Erro ao buscar tipos de usuários:', error);
            }
        }

        document.addEventListener('DOMContentLoaded', fetchTipoUsuarios);
    </script> -->
</head>
<body>
    <h1>Cadastro de Usuário</h1>
    <form id="usuarioForm">
        <!-- Outros campos -->
        <div>
            <label for="nome">Nome:</label>
            <input type="text" id="nome" name="nome" required>
        </div>
        <div>
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
        </div>
        <div>
            <label for="cpf">CPF:</label>
            <input type="number" id="cpf" name="cpf" required>
        </div>
        <div>
            <label for="senha">Senha:</label>
            <input type="password" id="senha" name="senha" required>
        </div>
        <div>
            <label for="celular">Celular:</label>
            <input type="tel" id="celular" name="celular" required>
        </div>
        <div>
            <label for="cep">CEP:</label>
            <input type="number" id="cep" name="cep" required>
        </div>
        <div>
            <label for="logradouro">Logradouro:</label>
            <input type="text" id="logradouro" name="logradouro" required>
        </div>
        <div>
            <label for="bairro">Bairro:</label>
            <input type="text" id="bairro" name="bairro" required>
        </div>
        <div>
            <label for="cidade">Cidade:</label>
            <input type="text" id="cidade" name="cidade" required>
        </div>
        <div>
            <label for="estado">Estado:</label>
            <input type="text" id="estado" name="estado" required>
        </div>
        <div>
            <label for="tiposUsuarios">Estado:</label>
            <input type="number" id="idTiposUsuarios" name="idTiposUsuarios" required>
        </div>
        <div>
            <label for="imagem">Imagem:</label>
            <input type="file" id="imagem" name="imagem" accept="image/*" required>
        </div>
        
        <button type="submit">Cadastrar</button>
    </form>

    <script>
        document.getElementById('usuarioForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const form = e.target;
            const formData = new FormData();

            // Adiciona o arquivo ao FormData
            formData.append('imagem', form.imagem.files[0]);

            // Adiciona os dados JSON ao FormData
            const data = {
                nome: form.nome.value,
                email: form.email.value,
                cpf: form.cpf.value,
                senha: form.senha.value,
                celular: form.celular.value,
                cep: form.cep.value,
                logradouro: form.logradouro.value,
                bairro: form.bairro.value,
                cidade: form.cidade.value,
                estado: form.estado.value,
                idTiposUsuarios: form.idTiposUsuarios.valeu,
            };
            formData.append('data', JSON.stringify(data));

            try {
                const response = await fetch('/usuario', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();
                console.log('Success:', result);
            } catch (error) {
                console.error('Error:', error);
            }
        });
    </script>
</body>
</html>
